<template>
  <lightning-card icon-name={iconName}>
    <template if:true={cardTitle}>
      <span slot="title">
        {cardTitle}
      </span>
    </template>
    <template if:true={showToolbar}>
      <div slot="actions" class="slds-grid slds-grid_vertical-align-center">
        <template if:true={showSearchBar}>
          <div class="slds-m-right_x-small" style="width: 200px;">
            <lightning-input
              type="search"
              label="Search"
              variant="label-hidden"
              placeholder="Search records..."
              value={searchTerm}
              onchange={handleSearchChange}
            ></lightning-input>
          </div>
        </template>
        <template if:true={showRefreshButton}>
          <lightning-button-icon
            icon-name="utility:refresh"
            alternative-text="Refresh"
            variant="border-filled"
            onclick={handleRefresh}
          ></lightning-button-icon>
        </template>
      </div>
    </template>
    <template if:true={isLoading}>
      <div class="slds-is-relative slds-p-around_large">
        <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
      </div>
    </template>
    <template if:true={hasData}>
      <lightning-datatable
        key-field={keyField}
        data={tableData}
        columns={tableColumns}
        hide-checkbox-column
        sorted-by={sortedBy}
        sorted-direction={sortedDirection}
        onsort={handleSort}
      ></lightning-datatable>
    </template>
    <template if:true={hasError}>
      <div class="slds-p-around_medium slds-text-color_error">
        {errorMessage}
      </div>
    </template>
    <template if:true={isEmpty}>
      <div class="slds-p-around_medium slds-text-color_weak slds-align_absolute-center">
        No records found.
      </div>
    </template>
  </lightning-card>
</template>
